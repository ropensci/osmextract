<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Get the path of .pbf and .gpkg files associated with an input OSM extract — oe_find • osmextract</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Get the path of .pbf and .gpkg files associated with an input OSM extract — oe_find"><meta property="og:description" content="This function takes a place name and returns the path of .pbf/.gpkg
files associated with it."><meta property="og:image" content="/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">osmextract</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/osmextract.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/providers.html">Add new OpenStreetMap providers</a>
    </li>
    <li>
      <a href="../articles/providers_comparisons.html">Comparing the supported OSM providers</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ropensci/osmextract/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get the path of .pbf and .gpkg files associated with an input OSM extract</h1>
    <small class="dont-index">Source: <a href="https://github.com/ropensci/osmextract/blob/HEAD/R/find.R" class="external-link"><code>R/find.R</code></a></small>
    <div class="hidden name"><code>oe_find.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function takes a <code>place</code> name and returns the path of <code>.pbf</code>/<code>.gpkg</code>
files associated with it.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">oe_find</span><span class="op">(</span></span>
<span>  <span class="va">place</span>,</span>
<span>  provider <span class="op">=</span> <span class="st">"geofabrik"</span>,</span>
<span>  download_directory <span class="op">=</span> <span class="fu"><a href="oe_download_directory.html">oe_download_directory</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  download_if_missing <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  return_pbf <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  return_gpkg <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>place</dt>
<dd><p>Description of the geographical area that should be matched with
a <code>.osm.pbf</code> file. Can be either a length-1 character vector, an
<code>sf</code>/<code>sfc</code>/<code>bbox</code> object, or a numeric vector of coordinates with length 2.
In the last case, it is assumed that the EPSG code is 4326 specified as
c(LON, LAT), while you can use any CRS with <code>sf</code>/<code>sfc</code>/<code>bbox</code> objects. See
Details and Examples in <code><a href="oe_match.html">oe_match()</a></code>.</p></dd>


<dt>provider</dt>
<dd><p>Which provider should be used to download the data? Available
providers can be found with the following command: <code><a href="oe_providers.html">oe_providers()</a></code>. For
<code><a href="oe_get.html">oe_get()</a></code> and <code><a href="oe_match.html">oe_match()</a></code>, if <code>place</code> is equal to <code>ITS Leeds</code>, then
<code>provider</code> is set equal to <code>test</code>. This is just for simple examples and
internal tests.</p></dd>


<dt>download_directory</dt>
<dd><p>Directory where the files downloaded by osmextract
are stored. By default it is equal to <code><a href="oe_download_directory.html">oe_download_directory()</a></code>.</p></dd>


<dt>download_if_missing</dt>
<dd><p>Attempt to download the file if it cannot be
found? <code>FALSE</code> by default.</p></dd>


<dt>return_pbf</dt>
<dd><p>Logical of length 1. If <code>TRUE</code>, the function returns the
path of the pbf file that matches the input <code>place</code>.</p></dd>


<dt>return_gpkg</dt>
<dd><p>Logical of length 1. If <code>TRUE</code>, the function returns the
path of the gpkg file that matches the input <code>place</code>.</p></dd>


<dt>quiet</dt>
<dd><p>Boolean. If <code>FALSE</code>, the function prints informative messages.
Starting from <code>sf</code> version
<a href="https://r-spatial.github.io/sf/news/index.html#version-0-9-6-2020-09-13" class="external-link">0.9.6</a>,
if <code>quiet</code> is equal to <code>FALSE</code>, then vectortranslate operations will
display a progress bar.</p></dd>


<dt>...</dt>
<dd><p>Extra arguments that are passed to <code><a href="oe_match.html">oe_match()</a></code> and <code><a href="oe_get.html">oe_get()</a></code>.
Please note that you cannot modify the argument <code>download_only</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A character vector of length one (or two) representing the path(s) of
the <code>.pbf</code>/<code>.gpkg</code> files associated with the input <code>place</code>. The files are
sorted in alphabetical order which implies that if both formats are present
in the <code>download_directory</code>, then the <code>.gpkg</code> file is returned first.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The matching between the existing files (saved in the directory
specified by <code>download_directory</code> parameter) and the input <code>place</code> is
performed using <code><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files()</a></code>, setting the <code>pattern</code> argument equal to the
basename of the URL associated to the input <code>place</code>. For example, if you
specify <code>place = "Isle of Wight"</code>, then the input is matched (via
<code><a href="oe_match.html">oe_match()</a></code>) with the URL of Isle of Wight's <code>.osm.pbf</code> file, and the
files are selected using a pattern equal to the basename of that URL.</p>
<p>If there is no file in the <code>download_directory</code> that can be matched with the
basename of the URL and <code>download_if_missing</code> parameter is equal to <code>TRUE</code>, then the
function tries to download and read a new file from the chosen
provider (<code>geofabrik</code> is the default provider). If <code>download_if_missing</code>
parameter is equal to <code>FALSE</code> (default value), then the function stops with
an error.</p>
<p>By default, this function returns the path of <code>.pbf</code> and <code>.gpkg</code> files
associated with the input place (if any). You can exclude one of the two
formats setting the arguments <code>return_pbf</code> or <code>return_gpkg</code> to <code>FALSE</code>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Copy the ITS file to tempdir() to make sure that the examples do not</span></span></span>
<span class="r-in"><span><span class="co"># require internet connection. You can skip the next 4 lines (and start</span></span></span>
<span class="r-in"><span><span class="co"># directly with oe_get_keys) when running the examples locally.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"its-example.osm.pbf"</span>, package <span class="op">=</span> <span class="st">"osmextract"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"test_its-example.osm.pbf"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="oe_get.html">oe_get</a></span><span class="op">(</span><span class="st">"ITS Leeds"</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span>, download_directory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">oe_find</span><span class="op">(</span><span class="st">"ITS Leeds"</span>, provider <span class="op">=</span> <span class="st">"test"</span>, download_directory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The input place was matched with: ITS Leeds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/tmp/Rtmp2D3nX3/test_its-example.gpkg"   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2] "/tmp/Rtmp2D3nX3/test_its-example.osm.pbf"</span>
<span class="r-in"><span><span class="fu">oe_find</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"ITS Leeds"</span>, provider <span class="op">=</span> <span class="st">"test"</span>,</span></span>
<span class="r-in"><span>  download_directory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, return_gpkg <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The input place was matched with: ITS Leeds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/tmp/Rtmp2D3nX3/test_its-example.osm.pbf"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">oe_find</span><span class="op">(</span><span class="st">"Isle of Wight"</span>, download_directory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">oe_find</span><span class="op">(</span><span class="st">"Malta"</span>, download_if_missing <span class="op">=</span> <span class="cn">TRUE</span>, download_directory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">oe_find</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"Leeds"</span>,</span></span>
<span class="r-in"><span>  provider <span class="op">=</span> <span class="st">"bbbike"</span>,</span></span>
<span class="r-in"><span>  download_if_missing <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  download_directory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  return_pbf <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove .pbf and .gpkg files in tempdir</span></span></span>
<span class="r-in"><span><span class="fu"><a href="oe_clean.html">oe_clean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Andrea Gilardi, Robin Lovelace.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

